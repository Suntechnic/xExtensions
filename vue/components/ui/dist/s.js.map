{"version":3,"file":"s.js","sources":["../src/ui.js"],"sourcesContent":["import {Input} from 'x.vue.mixins';\nimport './ui.css';\n\nexport const Selector = {\n    mixins: [Input],\n    name: 'Selector',\n    props: {\n        options: {},\n        valuekey: {},\n        titlekey: {},\n        name: {},\n        placeholder: {default: ''}\n    },\n    data ()\n\t{\n\t\treturn {\n\t\t\tstate: {\n                search: '',\n                open: false\n            }\n\t\t}\n\t},\n    computed: {\n        structure () {\n            let structure = {\n                options: [],\n                map: {}\n            };\n            \n            for (let i in this.options) {\n                let option = {\n                    value: this.valuekey?this.options[i][this.valuekey]:i,\n                    title: this.titlekey?this.options[i][this.titlekey]:this.options[i],\n                    //option: this.options[i]\n                }\n                option.searcheble = option.title.toLowerCase();\n                structure.map[option.value] = structure.options.length;\n                structure.options.push(option);\n            }\n            \n            return structure;\n        },\n        index () {\n            if (this.structure.map) return this.structure.map[this.valueModel];\n        },\n        option () {\n            if (this.structure.options?.length && typeof this.index != 'undefined') return this.structure.options[this.index]\n        },\n        title () {\n            if (this.option) return this.option.title;\n            return this.placeholder;\n        },\n        orderedOptions () {\n            let ordered = [\n                [],\n                [],\n                []\n            ];\n            \n            if (this.state.search) {\n                let search = this.state.search.toLowerCase();\n                for (let i in this.structure.options) {\n                    let option = this.structure.options[i];\n                    let pos = option.searcheble.indexOf(search)\n                    if (pos == 0) {\n                        ordered[0].push(option);\n                    } else if (pos > 0) {\n                        ordered[1].push(option);\n                    } else {\n                        ordered[2].push(option);\n                    }\n                }\n            } else {\n                ordered[0] = this.structure.options;\n            }\n            \n            return ordered;\n        }\n    },\n    methods: {\n        open ()\n        {\n            this.state.open = true;\n        },\n        close ()\n        {\n            this.state.open = false;\n        },\n        toggle ()\n        {\n            this.state.open = !this.state.open;\n        },\n        set (value)\n        {\n            this.valueModel = value;\n            this.close();\n        }\n    },\n\ttemplate: `\n    <div class=\"selector\">\n        <input\n                v-if=\"name\"\n                v-bind:name=\"name\"\n                v-bind:value=\"valueModel\"\n                type=\"hidden\"\n            >\n        <div class=\"selector-display\" v-on:click=\"toggle\">{{title}}</div>\n        <div class=\"selector-list\" v-if=\"state.open\">\n            <input v-model=\"state.search\">\n            <span class=\"selector-unselect\" v-if=\"option\" v-on:click=\"set('')\">Сбросить значение ❌</span>\n            <ul>\n                <li\n                        v-for=\"option in orderedOptions[0]\"\n                        v-bind:key=\"'o_'+option.value\"\n                        v-on:click=\"set(option.value)\"\n                        v-bind:class=\"{active:valueModel==option.value}\"\n                    >{{option.title}}</li>\n                <li\n                        v-for=\"option in orderedOptions[1]\"\n                        v-bind:key=\"'o_'+option.value\"\n                        v-on:click=\"set(option.value)\"\n                        v-bind:class=\"{active:valueModel==option.value}\"\n                        class=\"selector-list-item_others\"\n                    >{{option.title}}</li>\n                <li\n                        v-for=\"option in orderedOptions[2]\"\n                        v-bind:key=\"'o_'+option.value\"\n                        v-on:click=\"set(option.value)\"\n                        v-bind:class=\"{active:valueModel==option.value}\"\n                        class=\"selector-list-item_rest\"\n                    >{{option.title}}</li>\n            </ul>\n        </div>\n    </div>\n\t`\n}"],"names":["Selector","mixins","Input","name","props","options","valuekey","titlekey","placeholder","data","state","search","open","computed","structure","map","i","option","value","title","searcheble","toLowerCase","length","push","index","valueModel","orderedOptions","ordered","pos","indexOf","methods","close","toggle","set","template"],"mappings":"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"}