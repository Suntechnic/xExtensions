{"version":3,"file":"s.js","sources":["../src/core.js"],"sourcesContent":["import {loader as loaderVue} from 'x.vue.loader';\n\nexport const ControllersInstances = {};\n// BX.X.ControllersInstances - инстанцы контроллеров\n\nexport const core = {\n\n    Controller: class {\n        constructor (node,code,options) {\n\n            // получаем ноду\n            if (typeof node == 'string') {\n                let selector = node;\n                node = document.querySelector(selector);\n                if (!node) console.error('Invalid selector',selector);\n            }\n            if (!node) {\n                console.error('Invalid node for controller');\n                return null;\n            } \n\n            // если ноде уже назначен идентификатор контролера\n            if (node.dataset?.controller && ControllersInstances[node.dataset.controller]) {\n            return ControllersInstances[node.dataset.controller]; // возвращем его\n            }\n\n            // регистрируем контроллер этой ноды\n\n            this.node = node; // назначаем ноду в контролер\n            code = code || '';\n            let i = 1;\n            this.uid = code+'_'+i;\n            while (ControllersInstances[this.uid]) {\n                i++;\n                this.uid = code+'_'+i;\n            }\n            \n            ControllersInstances[this.uid] = this;\n            node.dataset.controller = this.uid;\n\n            return this.init(options || {});\n        }\n        init () {}\n    },\n\n}\n\n\nconsole.time('x.core.load');\nwindow.addEventListener('load', ()=>{\n    BX.ready(() => {\n            BX.onCustomEvent('x.core:loaded');\n            console.timeEnd('x.core.load');\n\n            loaderVue.init();\n\n            BX.onCustomEvent('x.core:inited');\n        });\n});"],"names":["ControllersInstances","core","Controller","node","code","options","selector","document","querySelector","console","error","dataset","controller","i","uid","init","time","window","addEventListener","BX","ready","onCustomEvent","timeEnd","loaderVue"],"mappings":";;;;;QAEaA,oBAAoB,GAAG,EAAE;IACtC;;AAEA,QAAaC,IAAI,GAAG;MAEhBC,UAAU;QACN,oBAAaC,IAAI,EAACC,IAAI,EAACC,OAAO,EAAE;UAAA;UAAA;;UAG5B,IAAI,OAAOF,IAAI,IAAI,QAAQ,EAAE;YACzB,IAAIG,QAAQ,GAAGH,IAAI;YACnBA,IAAI,GAAGI,QAAQ,CAACC,aAAa,CAACF,QAAQ,CAAC;YACvC,IAAI,CAACH,IAAI,EAAEM,OAAO,CAACC,KAAK,CAAC,kBAAkB,EAACJ,QAAQ,CAAC;;UAEzD,IAAI,CAACH,IAAI,EAAE;YACPM,OAAO,CAACC,KAAK,CAAC,6BAA6B,CAAC;YAC5C,OAAO,IAAI;;;;UAIf,IAAI,iBAAAP,IAAI,CAACQ,OAAO,0CAAZ,cAAcC,UAAU,IAAIZ,oBAAoB,CAACG,IAAI,CAACQ,OAAO,CAACC,UAAU,CAAC,EAAE;YAC/E,OAAOZ,oBAAoB,CAACG,IAAI,CAACQ,OAAO,CAACC,UAAU,CAAC,CAAC;;;;;UAKrD,IAAI,CAACT,IAAI,GAAGA,IAAI,CAAC;UACjBC,IAAI,GAAGA,IAAI,IAAI,EAAE;UACjB,IAAIS,CAAC,GAAG,CAAC;UACT,IAAI,CAACC,GAAG,GAAGV,IAAI,GAAC,GAAG,GAACS,CAAC;UACrB,OAAOb,oBAAoB,CAAC,IAAI,CAACc,GAAG,CAAC,EAAE;YACnCD,CAAC,EAAE;YACH,IAAI,CAACC,GAAG,GAAGV,IAAI,GAAC,GAAG,GAACS,CAAC;;UAGzBb,oBAAoB,CAAC,IAAI,CAACc,GAAG,CAAC,GAAG,IAAI;UACrCX,IAAI,CAACQ,OAAO,CAACC,UAAU,GAAG,IAAI,CAACE,GAAG;UAElC,OAAO,IAAI,CAACC,IAAI,CAACV,OAAO,IAAI,EAAE,CAAC;;QAClC;UAAA;UAAA,uBACO;;QAAE;;IAGlB,CAAC;IAGDI,OAAO,CAACO,IAAI,CAAC,aAAa,CAAC;IAC3BC,MAAM,CAACC,gBAAgB,CAAC,MAAM,EAAE,YAAI;MAChCC,EAAE,CAACC,KAAK,CAAC,YAAM;QACPD,EAAE,CAACE,aAAa,CAAC,eAAe,CAAC;QACjCZ,OAAO,CAACa,OAAO,CAAC,aAAa,CAAC;QAE9BC,mBAAS,CAACR,IAAI,EAAE;QAEhBI,EAAE,CAACE,aAAa,CAAC,eAAe,CAAC;OACpC,CAAC;IACV,CAAC,CAAC;;;;;;;;;"}